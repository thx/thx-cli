(self.webpackChunk_ali_mm_kit_magix=self.webpackChunk_ali_mm_kit_magix||[]).push([[565],{4624:(e,t,n)=>{var a={"./af":3715,"./af.js":3715,"./ar":3830,"./ar-dz":4919,"./ar-dz.js":4919,"./ar-kw":5049,"./ar-kw.js":5049,"./ar-ly":4900,"./ar-ly.js":4900,"./ar-ma":3203,"./ar-ma.js":3203,"./ar-sa":7679,"./ar-sa.js":7679,"./ar-tn":6593,"./ar-tn.js":6593,"./ar.js":3830,"./az":4459,"./az.js":4459,"./be":9261,"./be.js":9261,"./bg":1204,"./bg.js":1204,"./bm":3845,"./bm.js":3845,"./bn":4544,"./bn-bd":6090,"./bn-bd.js":6090,"./bn.js":4544,"./bo":311,"./bo.js":311,"./br":8336,"./br.js":8336,"./bs":7842,"./bs.js":7842,"./ca":5179,"./ca.js":5179,"./cs":5392,"./cs.js":5392,"./cv":1119,"./cv.js":1119,"./cy":6529,"./cy.js":6529,"./da":4752,"./da.js":4752,"./de":9383,"./de-at":3234,"./de-at.js":3234,"./de-ch":8235,"./de-ch.js":8235,"./de.js":9383,"./dv":7034,"./dv.js":7034,"./el":3982,"./el.js":3982,"./en-au":4142,"./en-au.js":4142,"./en-ca":5524,"./en-ca.js":5524,"./en-gb":1274,"./en-gb.js":1274,"./en-ie":6098,"./en-ie.js":6098,"./en-il":9251,"./en-il.js":9251,"./en-in":1165,"./en-in.js":1165,"./en-nz":3983,"./en-nz.js":3983,"./en-sg":5831,"./en-sg.js":5831,"./eo":4704,"./eo.js":4704,"./es":2487,"./es-do":8195,"./es-do.js":8195,"./es-mx":9703,"./es-mx.js":9703,"./es-us":9063,"./es-us.js":9063,"./es.js":2487,"./et":6811,"./et.js":6811,"./eu":4484,"./eu.js":4484,"./fa":2743,"./fa.js":2743,"./fi":3303,"./fi.js":3303,"./fil":8286,"./fil.js":8286,"./fo":2948,"./fo.js":2948,"./fr":9281,"./fr-ca":7720,"./fr-ca.js":7720,"./fr-ch":8106,"./fr-ch.js":8106,"./fr.js":9281,"./fy":2180,"./fy.js":2180,"./ga":9461,"./ga.js":9461,"./gd":3544,"./gd.js":3544,"./gl":3790,"./gl.js":3790,"./gom-deva":656,"./gom-deva.js":656,"./gom-latn":6677,"./gom-latn.js":6677,"./gu":3665,"./gu.js":3665,"./he":4653,"./he.js":4653,"./hi":6837,"./hi.js":6837,"./hr":2887,"./hr.js":2887,"./hu":9720,"./hu.js":9720,"./hy-am":7120,"./hy-am.js":7120,"./id":4981,"./id.js":4981,"./is":7593,"./is.js":7593,"./it":7658,"./it-ch":8275,"./it-ch.js":8275,"./it.js":7658,"./ja":2454,"./ja.js":2454,"./jv":9623,"./jv.js":9623,"./ka":9296,"./ka.js":9296,"./kk":6924,"./kk.js":6924,"./km":9971,"./km.js":9971,"./kn":6182,"./kn.js":6182,"./ko":4880,"./ko.js":4880,"./ku":5995,"./ku.js":5995,"./ky":8446,"./ky.js":8446,"./lb":2187,"./lb.js":2187,"./lo":6700,"./lo.js":6700,"./lt":8574,"./lt.js":8574,"./lv":9883,"./lv.js":9883,"./me":5212,"./me.js":5212,"./mi":2119,"./mi.js":2119,"./mk":9357,"./mk.js":9357,"./ml":7180,"./ml.js":7180,"./mn":4703,"./mn.js":4703,"./mr":3488,"./mr.js":3488,"./ms":5283,"./ms-my":4596,"./ms-my.js":4596,"./ms.js":5283,"./mt":2403,"./mt.js":2403,"./my":7867,"./my.js":7867,"./nb":8081,"./nb.js":8081,"./ne":9083,"./ne.js":9083,"./nl":8808,"./nl-be":725,"./nl-be.js":725,"./nl.js":8808,"./nn":2274,"./nn.js":2274,"./oc-lnc":2279,"./oc-lnc.js":2279,"./pa-in":9576,"./pa-in.js":9576,"./pl":5159,"./pl.js":5159,"./pt":9323,"./pt-br":657,"./pt-br.js":657,"./pt.js":9323,"./ro":9972,"./ro.js":9972,"./ru":7773,"./ru.js":7773,"./sd":7335,"./sd.js":7335,"./se":4249,"./se.js":4249,"./si":3744,"./si.js":3744,"./sk":9144,"./sk.js":9144,"./sl":2045,"./sl.js":2045,"./sq":9148,"./sq.js":9148,"./sr":4346,"./sr-cyrl":7601,"./sr-cyrl.js":7601,"./sr.js":4346,"./ss":1266,"./ss.js":1266,"./sv":3358,"./sv.js":3358,"./sw":673,"./sw.js":673,"./ta":4396,"./ta.js":4396,"./te":2549,"./te.js":2549,"./tet":654,"./tet.js":654,"./tg":574,"./tg.js":574,"./th":5319,"./th.js":5319,"./tk":7043,"./tk.js":7043,"./tl-ph":197,"./tl-ph.js":197,"./tlh":6937,"./tlh.js":6937,"./tr":1164,"./tr.js":1164,"./tzl":9527,"./tzl.js":9527,"./tzm":8825,"./tzm-latn":9245,"./tzm-latn.js":9245,"./tzm.js":8825,"./ug-cn":9417,"./ug-cn.js":9417,"./uk":3306,"./uk.js":3306,"./ur":3656,"./ur.js":3656,"./uz":7872,"./uz-latn":5661,"./uz-latn.js":5661,"./uz.js":7872,"./vi":9660,"./vi.js":9660,"./x-pseudo":3661,"./x-pseudo.js":3661,"./yo":6469,"./yo.js":6469,"./zh-cn":2453,"./zh-cn.js":2453,"./zh-hk":2782,"./zh-hk.js":2782,"./zh-mo":9302,"./zh-mo.js":9302,"./zh-tw":1291,"./zh-tw.js":1291};function s(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=c,e.exports=s,s.id=4624},6644:(e,t,n)=>{"use strict";n.r(t);var a=n(349),s=n(1101),c=n(6390),r=n(3094),i=n(3734),o=n(6957),l=n(3804),u=n.n(l),m=n(6840),f=n(1214),h=n(7689);function p(e){var t=[],n=function(e,n){e=encodeURIComponent(e),n=encodeURIComponent(n),(e||n)&&t.push(e+(void 0===n?"":"="+n))};for(var a in e){var s=e[a];if(s&&s.constructor===Array)for(var c=0,r=s.length;c<r;c++)n(a,s[c]);else n(a,s)}return t.join("&")}n(9645);var d=n(1096),v=n.n(d),g=n(9285);v()(g.Z,{insert:"head",singleton:!1}),g.Z.locals;var k=n(7196),y=n.n(k),j=n(3484),Z=n(8112);var E="global-toast-container",b=[],x=0;const C=function(e){(0,r.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function l(){return(0,s.Z)(this,l),a.apply(this,arguments)}return(0,c.Z)(l,[{key:"render",value:function(){return u().createElement(j.Z,{visible:this.props.visible,hasMask:!1,align:"tc tc",offset:[0,100]},u().createElement("ul",null,this.props.messages.map((function(e){return u().createElement("li",{key:e.id},u().createElement("div",{className:"global-toast"},u().createElement(Z.Z,{type:e.level||"warning",title:"提示"},u().createElement("p",{className:"message-body",title:e.message},e.message))))}))))}}],[{key:"run",value:function(e){var t=l.init();y().render(u().createElement(l,{visible:e.length>0,messages:e}),t)}},{key:"init",value:function(){var e=document.getElementById(E);return e||((e=document.createElement("div")).setAttribute("id",E),document.body.appendChild(e)),e}},{key:"show",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"warning",s="item-".concat(x++,"-").concat((new Date).getTime());for(b.unshift({id:s,message:e,level:a});b.length>10;)b.pop();return l.run(b),n&&setTimeout((function(){t.hide(s)}),3e3),s}},{key:"hide",value:function(e){b=b.filter((function(t){return t.id!==e})),l.run(b)}}]),l}(u().Component);function w(e,t){return fetch(e,Object.assign({},{credentials:"same-origin"},t)).then((function(e){return e.json()})).then((function(e){if(e.success)return void 0!==e.data&&null!==e.data||(e.data=e.data||{}),e.data;C.show(e.message||"系统错误")})).catch((function(e){C.show(e.message)}))}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=p(t);return a=a?"?".concat(a):"",w("".concat(e).concat(a),n)}function R(e,t){var n={};for(var a in t)void 0!==t[a]&&(n[a]=t[a]);return w(e,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)})}var M=window.RMX.project;const P=function(e){(0,r.Z)(p,e);var t,n,l=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,s.Z)(this,p),(t=l.call(this,e)).state={isSpm:!0,commitMsg:""},t}return(0,c.Z)(p,[{key:"changeValue",value:function(e,t){this.setState((0,a.Z)({},e,t))}},{key:"exec",value:function(){var e=this.state,t=e.isSpm,n=e.commitMsg;n?this.props.emit("daily","magixDaily",{cwd:M.dir,branch:M.branch,message:n,nospm:!t,uncheck:!0}):C.show("请先填写提交信息","warning")}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,a=n.isSpm,s=n.commitMsg;return u().createElement("div",{className:"task-detail"},u().createElement("div",{className:"action-head"},"开启之前，请填写daily配置项"),u().createElement("div",{className:"task-config"},u().createElement("span",{className:"task-config-label"},"执行打点任务"),u().createElement(m.Z,{className:"task-config-value",checked:a,onChange:function(t){return e.changeValue("isSpm",t)}}),u().createElement("br",null),u().createElement("span",{className:"task-config-textarea-label"},"commit信息"),u().createElement(f.Z.TextArea,{placeholder:"请输入commit信息",style:{width:"600px"},value:s,onChange:function(t){return e.changeValue("commitMsg",t)}})),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{disabled:1==t,onClick:function(){return e.exec()}},"发布到daily")))}}]),p}(u().Component);var S=n(5885),D=n(4930),z=n(3924);var A=S.Z.Tooltip;const I=function(e){(0,r.Z)(p,e);var t,n,l=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,s.Z)(this,p),(t=l.call(this,e)).state={appPath:window.RMX.project.dir,port:"",ip:"",isHmr:!0,isHttps:!1,isDebug:!1,isDocs:!0,isDesiger:!0,ipList:[]},t}return(0,c.Z)(p,[{key:"componentDidMount",value:function(){var e=this;N("/extra/magix/config",{cwd:this.state.appPath}).then((function(t){if(t){var n=t.ipConfig||{},a=[];for(var s in n)a.push({label:s,value:n[s]});e.setState({port:t.matPort||"",ipList:a})}}))}},{key:"exec",value:function(){var e=this.state,t=e.port,n=e.ip,a=e.isHmr,s=e.isHttps,c=e.isDebug,r=e.isDocs,i=e.isDesiger;this.props.emit("dev","magixDev",{cwd:this.state.appPath,port:t,ip:n,isCloseHmr:!a,isHttps:s,isDebug:c,isCloseDocs:!r,isCloseDesiger:!i})}},{key:"stopExec",value:function(){this.props.emit("dev","magixDev",{cwd:this.state.appPath})}},{key:"changeValue",value:function(e,t){("port"!==e||/^[0-9]*$/.test(t))&&this.setState((0,a.Z)({},e,t))}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,a=n.port,s=n.ip,c=n.isHmr,r=n.isHttps,i=n.isDebug,o=n.isDocs,l=n.isDesiger,p=n.ipList;return n.log,u().createElement("div",{className:"task-detail"},u().createElement("div",{className:"action-head"},"开启之前，请填写dev配置项"),u().createElement("div",{className:"task-config"},u().createElement("span",{className:"task-config-label"},"端口号"),u().createElement(f.Z,{className:"task-config-value",value:a,onChange:function(t){return e.changeValue("port",t)}}),u().createElement("span",{className:"task-config-label"},"ip地址 ",u().createElement(A,{trigger:u().createElement(D.Z,{size:"xs",type:"help"}),align:"t"},'对接真实接口时的ip地址，格式为 "ip" 或者 "ip,域名" ，默认对接RAP时无此值')),u().createElement(z.Z,{className:"task-config-value",style:{width:"200px"},value:s,dataSource:p,onChange:function(t){return e.changeValue("ip",t)}}),u().createElement("span",{className:"task-config-tips"},"ip为空时，表示走rap"),u().createElement("br",null),u().createElement("span",{className:"task-config-label"},"HMR热更新"),u().createElement(m.Z,{className:"task-config-value",checked:c,onChange:function(t){return e.changeValue("isHmr",t)}}),u().createElement("span",{className:"task-config-label"},"反向代理https"),u().createElement(m.Z,{className:"task-config-value",checked:r,onChange:function(t){return e.changeValue("isHttps",t)}}),u().createElement("span",{className:"task-config-label"},"debug模式 ",u().createElement(A,{trigger:u().createElement(D.Z,{size:"xs",type:"help"}),align:"t"},"开启debug模式会校验rap接口等")),u().createElement(m.Z,{className:"task-config-value",checked:i,onChange:function(t){return e.changeValue("isDebug",t)}}),u().createElement("span",{className:"task-config-label"},"帮助文档提示"),u().createElement(m.Z,{className:"task-config-value",checked:o,onChange:function(t){return e.changeValue("isDocs",t)}}),u().createElement("span",{className:"task-config-label"},"magix-desiger"),u().createElement(m.Z,{className:"task-config-value",checked:l,onChange:function(t){return e.changeValue("isDesiger",t)}})),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{disabled:1==t,className:"_mr10",onClick:function(){return e.exec()}},"开启dev"),u().createElement(h.Z,{disabled:0==t,onClick:function(){return e.stopExec()}},"结束dev")))}}]),p}(u().Component);var B=n(8845),T=n(2598),O=n(8051);var V=window.RMX.project.dir;const _=function(e){(0,r.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function l(e){var t;return(0,s.Z)(this,l),(t=a.call(this,e)).handleCommand=function(){var e=t.state.noMatchAPis,n=(0,B.Z)(t);if(e.length>0)var a=T.Z.confirm({title:"提醒",content:"RAP上有接口被删除或修改，确定要同步",onOk:function(){a.hide(),n.exec(),n.setState({noMatchAPis:[]})},onCancel:function(){a.hide()}});else n.exec()},t.state={models:[],repeatApis:[],originModels:[],noMatchAPis:[],canClick:!1,errorTip:""},t}return(0,c.Z)(l,[{key:"componentDidMount",value:function(){var e=this;N("/extra/magix/config",{cwd:V}).then((function(t){t&&t.rapProjectId?e.checkModels():e.setState({errorTip:"还未配置rapProjectId"})}))}},{key:"checkModels",value:function(){var e=this;R("/extra/magix/check/models",{cwd:V}).then((function(t){if(t&&t.data){var n=t.data.noMatchAPis&&t.data.noMatchAPis.length>0;e.setState({models:t.data.models||[],repeatApis:t.data.repeatApis||[],originModels:t.data.originModels||[],noMatchAPis:t.data.noMatchAPis||[],canClick:!0,errorTip:n?"":"本地跟RAP上的接口一致，无需同步"})}}))}},{key:"exec",value:function(){var e=this.state,t=e.models,n=e.repeatApis,a=e.originModels;this.props.emit("models","magixModels",{cwd:V,models:t,repeatApis:n,originModels:a})}},{key:"showNoMatch",value:function(){var e=this.state.noMatchAPis,t=T.Z.show({title:"RAP上被删除或修改过的接口",content:u().createElement(O.Z,{dataSource:e,style:{width:600}},u().createElement(O.Z.Column,{title:"api名称",dataIndex:"name"}),u().createElement(O.Z.Column,{title:"方法名",dataIndex:"method"}),u().createElement(O.Z.Column,{title:"接口地址",dataIndex:"url"})),footer:u().createElement(h.Z,{onClick:function(){t.hide()}},"确定")})}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,a=n.noMatchAPis,s=n.canClick;return n.errorTip,u().createElement("div",{className:"task-detail"},a.length>0?u().createElement("div",{className:"warning-list"},u().createElement("div",{className:"warning-link",onClick:function(){e.showNoMatch()}},"点击查看RAP上被删除或修改过的接口")):null,u().createElement("div",{className:"action-head"},"同步RAP上的接口配置到项目中"),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{disabled:!s||1==t,onClick:function(){return e.handleCommand()}},"开始同步")))}}]),l}(u().Component);var H=window.RMX.project.dir;const X=function(e){(0,r.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function l(e){var t;return(0,s.Z)(this,l),(t=a.call(this,e)).state={canClick:!1,errorTip:""},t}return(0,c.Z)(l,[{key:"componentDidMount",value:function(){var e=this;N("/extra/magix/config",{cwd:H}).then((function(t){if(t){var n="";t.iconfontId?t.iconfontPath||(n="还未配置iconfontPath"):n="还未配置iconfontId",e.setState({canClick:t.iconfontId&&t.iconfontPath,errorTip:n})}}))}},{key:"exec",value:function(){this.props.emit("iconfont","magixIconfont",{cwd:H})}},{key:"check",value:function(){this.props.emit("iconfont","magixCheckIconfont",{cwd:H})}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,a=n.canClick,s=n.errorTip;return 1==t&&(this.hasCheckOk=!0),u().createElement("div",{className:"task-detail"},u().createElement("div",{className:"action-head"},"同步iconfont上的图标到项目中"),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{className:"_mr10",disabled:!a||1==t,onClick:function(){return e.check()}},"检测"),u().createElement(h.Z,{disabled:!a||1==t||!this.hasCheckOk,onClick:function(){return e.exec()}},"开始同步"),u().createElement("span",{className:"action-error"},s)))}}]),l}(u().Component);var F=window.RMX.project.dir;const L=function(e){(0,r.Z)(m,e);var t,n,l=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function m(e){var t;return(0,s.Z)(this,m),(t=l.call(this,e)).state={removeSpm:!1,canClick:!1,errorTip:""},t}return(0,c.Z)(m,[{key:"componentDidMount",value:function(){var e=this;N("/extra/magix/config",{cwd:F}).then((function(t){t&&e.setState({canClick:!!t.spma,errorTip:t.spma?"":"还未配置spma"})}))}},{key:"changeValue",value:function(e,t){this.setState((0,a.Z)({},e,t))}},{key:"exec",value:function(e){this.props.emit("spmlog","magixSpmlog",{cwd:F,removeSpm:e})}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,a=(n.removeSpm,n.canClick),s=n.errorTip;return u().createElement("div",{className:"task-detail"},u().createElement("div",{className:"action-head"},"追加spm打点，同时同步数据小站数据配置"),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{className:"_mr10",disabled:!a||1==t,onClick:function(){return e.exec(!1)}},"打点"),u().createElement(h.Z,{disabled:!a||1==t,onClick:function(){return e.exec(!0)}},"清空打点"),u().createElement("span",{className:"action-error"},s)))}}]),m}(u().Component);var G=window.RMX.project.dir;const U=function(e){(0,r.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function l(e){var t;return(0,s.Z)(this,l),(t=a.call(this,e)).state={canClick:!1,errorTip:""},t}return(0,c.Z)(l,[{key:"componentDidMount",value:function(){var e=this;N("/extra/magix/config",{cwd:G}).then((function(t){t&&e.setState({canClick:!!t.chartParkId,errorTip:t.chartParkId?"":"还未配置chartParkId"})}))}},{key:"exec",value:function(){this.props.emit("chartpark","magixChartpark",{cwd:G})}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,a=n.canClick,s=n.errorTip;return u().createElement("div",{className:"task-detail"},u().createElement("div",{className:"action-head"},"同步chartpark上的数据到项目中"),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{disabled:!a||1==t,onClick:function(){return e.exec()}},"开始同步"),u().createElement("span",{className:"action-error"},s)))}}]),l}(u().Component);var q=n(8375);var J=window.RMX.project.dir;const W=function(e){(0,r.Z)(m,e);var t,n,l=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function m(e){var t;return(0,s.Z)(this,m),(t=l.call(this,e)).state={name:"",list:[],canClick:!1,loading:!1},t}return(0,c.Z)(m,[{key:"componentDidMount",value:function(){var e=this;N("/extra/magix/list/gallery",{cwd:J}).then((function(t){if(t&&t.length>0){for(var n=[],a=0;a<t.length;a++)if(t[a].list&&t[a].list.length>0)for(var s=0;s<t[a].list.length;s++)n.push({repoName:t[a].repoName,path:t[a].path,label:t[a].repoName+": "+t[a].list[s].name,name:t[a].list[s].name,value:t[a].list[s].name,version:t[a].list[s].version});e.setState({list:n})}}))}},{key:"changeValue",value:function(e,t){this.setState((0,a.Z)({},e,t))}},{key:"exec",value:function(){var e=this.state.name;this.props.emit("gallery","magixGallery",{cwd:J,name:e})}},{key:"check",value:function(){var e=this,t=this.state.name;this.setState({loading:!0}),R("/extra/magix/check/gallery",{cwd:J,name:t}).then((function(t){if(e.setState({loading:!1}),t&&t.length>0){for(var n=[],a=0;a<t.length;a++)if(t[a].modifyFiles&&t[a].modifyFiles.length>0)for(var s=0;s<t[a].modifyFiles.length;s++)n.push({galleryName:t[a].galleryName,name:t[a].modifyFiles[s].filePath,status:t[a].modifyFiles[s].type});e.showDiffGallery(n)}else e.exec()}))}},{key:"showDiffGallery",value:function(e){var t=this,n=T.Z.show({title:"更新过的组件",content:u().createElement(O.Z,{dataSource:e,style:{width:600}},u().createElement(O.Z.Column,{title:"组件名",dataIndex:"galleryName"}),u().createElement(O.Z.Column,{title:"路径",dataIndex:"name"}),u().createElement(O.Z.Column,{title:"状态",dataIndex:"status"})),footer:u().createElement("div",null,u().createElement(h.Z,{type:"primary",className:"_mr10",onClick:function(){n.hide(),t.exec()}},"确定"),u().createElement(h.Z,{onClick:function(){n.hide()}},"取消"))})}},{key:"showList",value:function(){var e=this.state.list,t=T.Z.show({title:"本地所有组件列表",content:u().createElement(O.Z,{dataSource:e,style:{width:600}},u().createElement(O.Z.Column,{title:"组件名",dataIndex:"name"}),u().createElement(O.Z.Column,{title:"版本",dataIndex:"version"}),u().createElement(O.Z.Column,{title:"组件库名",dataIndex:"repoName"}),u().createElement(O.Z.Column,{title:"安装路径",dataIndex:"path"})),footer:u().createElement(h.Z,{onClick:function(){t.hide()}},"确定")})}},{key:"render",value:function(){var e=this,t=(this.props.status,this.state),n=t.name,a=t.list,s=t.loading;return u().createElement("div",{className:"task-detail"},u().createElement(q.Z,{visible:s,fullScreen:!0,shape:"fusion-reactor"},a.length>0?u().createElement("div",{className:"warning-list"},u().createElement("div",{className:"warning-link",onClick:function(){e.showList()}},"点击查看本地所有组件列表")):null,u().createElement("div",{className:"action-head"},"同步gallery组件到项目中"),u().createElement("div",{className:"task-config"},u().createElement("span",{className:"task-config-label"},"组件"),u().createElement(f.Z,{className:"task-config-value",style:{width:"200px"},value:n,onChange:function(t){return e.changeValue("name",t)}}),u().createElement("span",{className:"task-config-tips"},"如果不填则是全量同步")),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{className:"_mr10",onClick:function(){return e.check()}},"执行"))))}}]),m}(u().Component);var $=window.RMX.project;const K=function(e){(0,r.Z)(p,e);var t,n,l=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,o.Z)(t);if(n){var s=(0,o.Z)(this).constructor;e=Reflect.construct(a,arguments,s)}else e=a.apply(this,arguments);return(0,i.Z)(this,e)});function p(e){var t;return(0,s.Z)(this,p),(t=l.call(this,e)).state={isSpm:!0,commitMsg:"",international:!1},t}return(0,c.Z)(p,[{key:"changeValue",value:function(e,t){this.setState((0,a.Z)({},e,t))}},{key:"exec",value:function(){var e=this.state,t=e.isSpm,n=e.commitMsg,a=e.international;n?this.props.emit("publish","magixPublish",{cwd:$.dir,branch:$.branch,message:n,international:a,nospm:!t,uncheck:!0}):C.show("请先填写提交信息","warning")}},{key:"render",value:function(){var e=this,t=this.props.status,n=this.state,a=n.isSpm,s=n.commitMsg,c=n.international;return u().createElement("div",{className:"task-detail"},u().createElement("div",{className:"action-head"},"开启之前，请填写publish配置项"),u().createElement("div",{className:"task-config"},u().createElement("span",{className:"task-config-label"},"发布前执行spm打点"),u().createElement(m.Z,{className:"task-config-value",checked:a,onChange:function(t){return e.changeValue("isSpm",t)}}),u().createElement("br",null),u().createElement("span",{className:"task-config-label"},"同时发布到国际版cdn"),u().createElement(m.Z,{className:"task-config-value",checked:c,onChange:function(t){return e.changeValue("international",t)}}),u().createElement("br",null),u().createElement("span",{className:"task-config-textarea-label"},"提交代码的commit信息"),u().createElement(f.Z.TextArea,{placeholder:"请输入commit信息",style:{width:"600px"},value:s,onChange:function(t){return e.changeValue("commitMsg",t)}})),u().createElement("div",{className:"action-btn"},u().createElement(h.Z,{disabled:1==t,onClick:function(){return e.exec()}},"发布")))}}]),p}(u().Component);n(8329);var Q=n(9968);n(269),n(6380);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,o.Z)(e);if(t){var s=(0,o.Z)(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}u().Component,u().Component,u().Component,Q.Z.Item;u().Component;const ee=[{type:"app.task",name:"dev",component:I,title:"本地开发"},{type:"app.task",name:"models",component:_,title:"同步 RAP"},{type:"app.task",name:"iconfont",component:X,title:"同步 Iconfont"},{type:"app.task",name:"chartpark",component:U,title:"同步 Charkpark"},{type:"app.task",name:"gallery",component:W,title:"同步 Gallery 组件"},{type:"app.task",name:"spmlog",component:L,title:"打点 spmlog"},{type:"app.task",name:"daily",component:P,title:"日常部署"},{type:"app.task",name:"publish",component:K,title:"正式部署"}];console.groupCollapsed("Magix Widgets"),console.log(ee),console.groupEnd(),window.RMX.reset(),ee.forEach((function(e){window.RMX.register(e)}))},9285:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(3780),s=n.n(a)()((function(e){return e[1]}));s.push([e.id,".global-toast {\n  margin: 5px 0;\n}\n.global-toast .next-notice.next-notice-warning.next-notice-standalone {\n  border-width: 1px;\n  padding: 8px;\n}\n.global-toast .message-body {\n  max-width: 400px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  margin: 0;\n}",""]);const c=s}}]);